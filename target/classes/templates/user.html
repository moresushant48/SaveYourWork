<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<span th:replace="includes :: links"></span>
	
	<title th:if="${currentPage == 'account'}">Account</title>
	<title th:if="${currentPage == 'resetPassword'}">Reset Password</title>

</head>

<body>

	<span th:replace="includes :: trans"></span>
	
	<main>
	
	<span th:replace="includes :: header"></span>
	
	<div th:if="${currentPage == 'account'}" class="container mt-3">
		<div class="m-auto bg-light border border-light text-center p-lg-5 p-4 form-size text-dark rounded anim-fadeUp">
		
		<div class="form-group">
			<p class="h1-responsive text-center text-primary">Account</p>
		</div>
      	<hr>
      	<div class="form-group mb-2">
      		<i class="fa fa-user-o fa-2x blue-grey-text"></i>
      		<p id="username" class="h3-responsive" th:text="${user.username}"></p>
      	</div>      	
      	
      	<div class="form-group mb-2">
	      	<i class="fa fa-envelope-o fa-2x blue-grey-text"></i>
	      	<p id="email" class="h3-responsive" th:text="${user.email}"></p>
      	</div>
      	
      	<div class="form-group mb-2">
            	
	      	<a id="btnGenKey" href="/user/account/genKey" class="btn amy-crisp-gradient text-white w-100 mr-2">
	      	<p id="publicPass" class="h3-responsive font-weight-bold text-monospace" th:text="${user.publicPass}"></p>
	      	Generate Security Key
	      	</a>
	      	
	      	<script type="text/javascript">
      		
      		$("#btnGenKey").click(function(event) {
      			
      			event.preventDefault();
      			$.ajax({
      				url: '/user/account/genKey',
      				type: 'get',
      				success: function(response){
      					
      					$('#publicPass').text(response);
      				}
      			});
      			
      		});
      	
      	</script>
      	</div>
      	
     	<a href="/user/account/resetPassword" class="btn purple-gradient w-100 mr-2">Change Password</a>
      	
      	</div>
   	</div>
   	
   	<form th:if="${currentPage == 'resetPassword'}" th:action="@{/user/account/resetPassword}" method="post" class="container-fluid mt-3">
   		<div class="border border-light bg-light p-5 form-size text-center text-dark m-auto bg-white">
		    <p class="h4 mb-5">Reset Password</p>
		
			<input class="form-control mb-4" type="email" placeholder="Email Address" th:value="${email}" required disabled="disabled">
		
			<input name="password" class="form-control mb-4" type="password" placeholder="Password" pattern=".{3,15}" title="* Three or more characters. * Not more than 15 characters allowed." required>	   
			
			<div class="text-center mb-4" th:if="${param.success}">
	      		<p class="alert alert-success">Password changed Successfully.<br><a href="/login" class="text-primary">Please Login</a></p>
	      	</div>
	      	<div class="text-center mb-4" th:if="${param.failed}">
	      		<p class="alert alert-danger">Couldn't change password.</p>
	      	</div>
			
			<input class="btn btn-info btn-block my-4" type="submit" value="Submit">
			<br/>
			<a href="."><i class="fa fa-arrow-left"></i> Back</a>
	    </div>
	</form>
    
    </main>
    
</body>
</html>