<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<span th:fragment="links">
	<link rel="stylesheet" th:href="@{/css/basic.css}">
	<link href="https://fonts.googleapis.com/css?family=Ubuntu|Oxygen|Lobster&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>

	<!-- Bootstrap core CSS -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Bootstrap -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.11.0/css/mdb.min.css" rel="stylesheet"> 
	
	<!-- JQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.12.0/js/mdb.min.js"></script>
	
	<!-- Local css -->
	<script type="text/javascript" th:src="@{/js/basic.js}"></script>
	<script type="text/javascript" th:src="@{/js/listUserFiles.js}"></script>
	<script type="text/javascript" th:src="@{/js/getAnalytics.js}"></script>
	<script type="text/javascript" th:src="@{/js/listUsers.js}"></script>
	<script type="text/javascript" th:src="@{/js/listFeedbacks.js}"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js" integrity="sha256-6EA3edRalZC0PA7PmE6+Eedf0pgmMNZYOQpgAaZ2h3A=" crossorigin="anonymous"></script>
	
	<!-- Datatables cdn -->
	<!-- <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script> -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/r-2.2.3/sl-1.3.1/datatables.min.css"/>
	<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/r-2.2.3/sl-1.3.1/datatables.min.js"></script>
	
</span>

<div th:fragment="trans" class="loading-container">
	<div class="loading-screen">
		<h1 class="navbar-brand h1-responsive font-lobster loading-screen-logo">SaveYourWork</h1>
		<script type="text/javascript">
			animate();
		</script>
	</div>
</div>

<body>
	<!-- 
		Normal Buttons for Navigation Bar.
	 -->
			
	<a th:fragment="sitename" href="#" class="navbar-brand h3-responsive p-3 lead font-lobster" >SaveYourWork</a>
	
	<li th:fragment="btnLogin" class="nav-item"><a href="/login" class="nav-link h6-responsive p-3">Login</a></li>

	<li th:fragment="btnLogout" class="nav-item"><a href="/logout" class="nav-link h6-responsive p-3">Logout</a></li>
	
	<li th:fragment="btnSignUp" class="nav-item"><a href="/register" class="nav-link h6-responsive p-3">Sign Up</a></li>
	
	<li th:fragment="btnMyFiles" class="nav-item"><a href="/file-home" class="nav-link h6-responsive p-3">My Files</a></li>
	
	<li th:fragment="btnHome" class="nav-item"><a href="/" class="nav-link h6-responsive p-3">Home</a></li>

	<li th:fragment="btnAdminPanel" class="nav-item"><a href="/admin/analytics" th:if="${#authorization.expression('hasAuthority(''SUPER_USER'')')}" class="nav-link h6-responsive p-3">Admin Panel</a></li>

	<li th:fragment="btnAuthName" class="nav-item"><a class="nav-link h6-responsive p-3">Welcome, [[${#authentication.name}]]</a></li>

	<li th:fragment="btnAccount" class="nav-item"><a href="/user/account" class="nav-link h6-responsive p-3">Account</a></li>
	 
	 <!-- 
	 	Header Section for every page.
	  -->

	<header class="navbar navbar-expand-lg navbar-dark bg-color nav-anim" style="z-index: 8">
		
		<span th:replace="includes :: sitename"></span>
		
		<!-- Collapse button -->
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav"
			aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<!-- Collapsible content -->
		<div class="collapse navbar-collapse justify-content-end" id="nav">

			<span th:if="${currentPage == 'index' OR currentPage == 'contactus' OR currentPage == 'feedback'
						OR currentPage == 'forgotUsername' OR currentPage == 'forgotPassword' OR currentPage == 'newPassword'
						OR currentPage == 'fileAccessPublic' OR currentPage == 'fileAccessProtected' OR currentPage == 'askTempPass'
						OR currentPage == 'fileAccess' }">
				<ul th:if="${#authentication.name == 'anonymousUser'}" class="navbar-nav mr-auto">
					<span th:replace="includes :: btnLogin"></span>
					<span th:replace="includes :: btnSignUp"></span>
				</ul>
				<ul th:if="${#authentication.name != 'anonymousUser'}" class="navbar-nav mr-auto">
					<span th:replace="includes :: btnAuthName"></span>
					<span th:replace="includes :: btnMyFiles"></span>
					<span th:replace="includes :: btnAccount"></span>				
					<span th:replace="includes :: btnAdminPanel"></span>
					<span th:replace="includes :: btnLogout"></span>
				</ul>
			</span>
			
			<span>
			<ul th:if="${currentPage == 'home'}" class="navbar-nav mr-auto">
				<span th:replace="includes :: btnAuthName"></span>
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnAccount"></span>
				<span th:replace="includes :: btnAdminPanel"></span>
				<span th:replace="includes :: btnLogout"></span>
			</ul>
		
			<ul th:if="${currentPage == 'login'}" class="navbar-nav mr-auto">
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnSignUp"></span>
			</ul>
			
			<ul th:if="${currentPage == 'register'}" class="navbar-nav mr-auto">
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnLogin"></span>
			</ul>
			
			<ul th:if="${currentPage == 'analytics' OR currentPage == 'listUsers' OR currentPage == 'userFeedback'}" class="navbar-nav mr-auto">
				<span th:replace="includes :: btnAuthName"></span>
				<span th:replace="includes :: btnMyFiles"></span>
				<span th:replace="includes :: btnAccount"></span>
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnLogout"></span>
			</ul>
			
			<ul th:if="${currentPage == 'userDetails'}" class="navbar-nav mr-auto">
				<span th:replace="includes :: btnAuthName"></span>
				<span th:replace="includes :: btnMyFiles"></span>
				<span th:replace="includes :: btnAccount"></span>
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnLogout"></span>
			</ul>
			
			<ul th:if="${currentPage == 'account' OR currentPage == 'resetPassword'} " class="navbar-nav mr-auto">
				<span th:replace="includes :: btnAuthName"></span>
				<span th:replace="includes :: btnMyFiles"></span>
				<span th:replace="includes :: btnAdminPanel"></span>
				<span th:replace="includes :: btnHome"></span>
				<span th:replace="includes :: btnLogout"></span>
			</ul>
			</span>
		</div>

	</header>
	
	<footer th:fragment="footer" class="page-footer font-small teal">
		<div class="container-fluid py-3 text-center">
			<a href="/feedback">Feedback</a>&nbsp;&nbsp;
			<a href="/contactus">Contact</a>
		</div>

		<div class="footer-copyright text-center py-3">
			&copy; 2020 Copyright:Sushant More - All Rights Reserved
		</div>
	</footer>
</body>
</html>